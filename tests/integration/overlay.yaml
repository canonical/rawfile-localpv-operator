description: Overlay for attaching current charm
applications:
  k8s:
    num_units: 1
    expose: true
    options:
      bootstrap-node-taints: ""
      local-storage-enabled: false
      node-labels: "storagePool=primary"
    constraints: arch=amd64 cores=2 mem=8192M root-disk=16384M virt-type=virtual-machine
  k8s-worker:
    num_units: 1
    expose: true
    options:
      node-labels: storagePool=secondary
    constraints: arch=amd64 cores=2 mem=8192M root-disk=16384M virt-type=virtual-machine

  # Primary Rawfile LocalPV Deployment
  primary-localpv:
    charm: {{ charm }}
    options:
      namespace: primary
      storage-class-name: primary-sc
      node-selector: storagePool=primary
      manage-namespace: true
  # Secondary Rawfile LocalPV Deployment
  secondary-localpv:
    charm: {{ charm }}
    options:
      namespace: secondary
      storage-class-name: secondary-sc
      node-selector: storagePool=secondary
      manage-namespace: true
relations:
- - k8s:juju-info
  - primary-localpv:kubernetes
- - k8s:juju-info
  - secondary-localpv:kubernetes
